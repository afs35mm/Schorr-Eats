<!doctype html>
<html ng-app="eatsTodo">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Schorr Eats</title>
	<link rel="stylesheet" href="styles/main.css">
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body ng-controller="mainController">
	<div class="content">
		<header>
			<h1>Schorr Eats 
				<% if(user) { %>
					<small>Hi there, <%= user.prettyUsername %></small> 
				<% } else{ %>  
					<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#loginModal">Login</button>
				<% } %>
			</h1>
		</header>
		<% if (message.length > 0) { %>
			<div class="alert alert-danger"><%= message %></div>
		<% } %>
		<table class="table">
			<thead>
				<tr>
					<th>Name</th>
					<th>Average Rating</th>
					<th>Location</th>
					<th>Notes</th>
					<th>Pictures</th>
					<% if(user){ %>
					<th class="align-right"></th>
					<% } %>   
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="todo in todos">
					<td>
						{{ todo.text }}
					</td>
					<td>
						{{ todo.location }}
					</td>
					<td>hi</td>
					<td>hi</td>
					<td>hi</td>
					<% if(user){ %>
					<td class="align-right">
						<!-- <button type="button" class="btn btn-danger" ng-click="deleteTodo(todo._id)">Delete</button> -->
						<button type="button" class="btn btn-info" data-toggle="modal" data-target="#editModal" ng-click="editTodo(todo._id)">Edit</button>
					</td>
					<% } %>  
				</tr>
			</tbody>
		</table>
		<% if(user){ %>
		<div class="row">
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addModal">Add Restaurant</button>
			<!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#loginModal">Logout</button> -->
			<a class="btn btn-default logout" href="/logout">Logout</a>
		</div>
		<% } %>  
		<!--ADD RESTUARANT-->
		<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addResturant" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Add Resturant</h4>
					</div>
					<form>
						<div class="modal-body">
						<div class="form-group">
						    <label for="nameField">Resturant Name</label>
							<input ng-model="formData.text" type="text" class="form-control" id="nameField" placeholder="Resturant Name">
						</div>
						<div class="form-group">
						    <label for="locationField">Location</label>
							<input ng-model="formData.location" type="text" class="form-control" id="locationField" placeholder="Location">
						</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
							<button type="button" class="btn btn-primary" ng-click="createTodo()">Add Restaurant!</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!--ADD RESTUARANT-->
		<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editResturant" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Edit Resturant</h4>
					</div>
					<form>
						<div class="modal-body">
						<div class="form-group">
						    <label for="nameField">Resturant Name</label>
							<input ng-model="todo.text" type="text" class="form-control" id="nameField" placeholder="{{todo.text}}">
						</div>
						<div class="form-group">
						    <label for="locationField">Location</label>
							<input ng-model="formData.location" type="text" class="form-control" id="locationField" placeholder="Location">
						</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
							<button type="button" class="btn btn-primary" ng-click="createTodo()">Add Restaurant!</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!--Login-->
		<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="login" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Login</h4>
					</div>
					<form action="/users/login" method="post">
						<div class="modal-body">
						<div class="form-group">
						    <label for="username">What's your username?</label>
							<input type="text" name="username" class="form-control" id="username" placeholder="username">
						</div>
						<div class="form-group">
						    <label for="password">What's your password? (case sensitive)</label>
							<input type="password" name="password" class="form-control" id="password" placeholder="Password">
						</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
							<button type="submit" class="btn btn-primary">Login</button>
						</div>
					</form> 
				</div>
			</div>
		</div>
	</div>
	<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
	<!--<script src="js/main.js"></script>-->
	<script src="js/bundle.js"></script>
</body>
</html>